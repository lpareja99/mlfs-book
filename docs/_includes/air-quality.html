<!-- Simple styling for layout -->
<style>
  .aq-layout {
    display: grid;
    grid-template-columns: minmax(0, 1.3fr) minmax(0, 1fr);
    gap: 1.5rem;
    align-items: start;
  }

  #aq-map {
    width: 100%;
    height: 400px;
    border-radius: 8px;
    border: 1px solid #ddd;
  }

  .aq-panel {
    background: #ffffff;
    padding: 1rem 1.25rem;
    border-radius: 8px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
  }

  .aq-badges {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
    margin-bottom: 0.75rem;
  }

  .aq-badge {
    padding: 0.15rem 0.6rem;
    border-radius: 999px;
    font-size: 0.75rem;
    background: #f1f5f9;
    color: #334155;
  }

  .aq-img {
    width: 100%;
    max-width: 600px;
    border-radius: 6px;
    border: 1px solid #ddd;
  }

  @media (max-width: 900px) {
    .aq-layout {
      grid-template-columns: 1fr;
    }
  }
</style>

<div class="aq-layout">
  <!-- Left: Map -->
  <div>
    <h2>Monitoring Stations</h2>
    <p>
      Click on each marker to see the station details and open the live AQICN page.
    </p>
    <div id="aq-map"></div>
  </div>

  <!-- Right: Forecast (your existing image) -->
  <div class="aq-panel">
    <h2>3-Day PM2.5 Forecast</h2>
    <div class="aq-badges">
      <span class="aq-badge">Daily retrained</span>
      <span class="aq-badge">Uses weather + PM2.5 history</span>
    </div>
    <p>
      The chart below shows the PM2.5 forecast for the next days at the
      main station. Values above the WHO guideline are highlighted.
    </p>
    <img src="./assets/img/pm25_forecast.png" alt="PM2.5 forecast"
         class="aq-img" />
  </div>
</div>

<hr />

<h2>Model Performance Monitoring</h2>
<p>
  1-Day hindcast: predictions vs outcomes. This plot compares yesterday&apos;s forecast
  with the observed PM2.5 values.
</p>
<img src="./assets/img/pm25_hindcast_1day.png" alt="PM2.5 1-day hindcast"
     class="aq-img" />

<!-- Leaflet CSS & JS from CDN -->
<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
  crossorigin=""
/>
<script
  src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
  integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
  crossorigin=""
></script>

<script>
  // List of stations – adjust to your real list
  const stations = [
    {
      uid: 2860,
      name: "Ecke Taborstraße - Glockengasse",
      lat: 48.216739,
      lng: 16.380918,
      url: "https://aqicn.org/station/@2860/"
    },
    {
      uid: 9991,
      name: "Belgradplatz",
      lat: 48.185,
      lng: 16.354,
      url: "https://aqicn.org/station/@9991/"
    },
    // TODO: add the rest of your stations here...
  ];

  // Center map on Vienna (change if needed)
  const map = L.map("aq-map").setView([48.2082, 16.3738], 12);

  L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
    maxZoom: 19,
    attribution: "&copy; OpenStreetMap contributors"
  }).addTo(map);

  stations.forEach((s) => {
    const marker = L.marker([s.lat, s.lng]).addTo(map);
    marker.bindPopup(
      `<strong>${s.name}</strong><br/>
       UID: ${s.uid}<br/>
       <a href="${s.url}" target="_blank">Open AQICN station</a>`
    );
  });
</script>